{% extends "app_general/base.html" %}

{% block content %}
<div class="container mt-5">
    <h2>Online Market Place</h2>
    <!-- เพิ่มปุ่มนี้ -->
    <a href="{% url 'add_slide' %}" class="btn btn-success mb-4">เพิ่มรูปภาพสไลด์</a>
    
    <div class="w3-panel">
        <h1><b>สไลด์โชว์</b></h1>
    </div>

    <div class="w3-container">
      {% for slide in slides %}
      <div class="w3-display-container mySlides">
          <img src="{{ slide.image.url }}" style="width:100%">
          <div class="w3-display-topleft w3-container w3-padding-32">
              <span class="w3-white w3-padding-large w3-animate-bottom">{{ slide.caption }}</span>
          </div>
      </div>
      {% endfor %}
    </div>
</div>

<script>
    let slideIndex = 0;
    function showSlides() {
        let slides = document.getElementsByClassName("mySlides");
        for (let i = 0; i < slides.length; i++) {
            slides[i].style.display = "none";  
        }
        slideIndex++;
        if (slideIndex > slides.length) {slideIndex = 1}
        slides[slideIndex-1].style.display = "block";  
        setTimeout(showSlides, 3000);
    }
    window.onload = function() {
        showSlides();
    }
</script>
{% endblock %}
